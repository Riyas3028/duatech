<%-include("../../views/partials/user/header")%>
<!-- FontAwesome for Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
/* Black and White Gradient Theme */
:root {
  --primary-dark: #000000;
  --primary-light: #ffffff;
  --accent-color: #333333;
  --text-dark: #212121;
  --text-light: #f5f5f5;
  --hover-color: #444444;
  --gray-light: #e0e0e0;
  --gray-medium: #9e9e9e;
  --transition-speed: 0.3s;
}

body {
  background: linear-gradient(to bottom, var(--primary-light) 0%, var(--gray-light) 100%);
  color: var(--text-dark);
}

/* Button Styling */
.btn {
  border-radius: 30px;
  padding: 8px 20px;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  transition: all var(--transition-speed) ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  border: none;
}

.btn-primary {
  background: linear-gradient(135deg, var(--primary-dark) 0%, var(--accent-color) 100%);
  color: var(--text-light);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.btn-outline-secondary {
  background: transparent;
  color: var(--accent-color);
  border: 1px solid var(--accent-color);
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
  background: linear-gradient(135deg, var(--accent-color) 0%, var(--primary-dark) 100%) !important;
  color: var(--primary-light) !important;
}

/* Product Card Styling */
.product-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  border-radius: 12px;
  overflow: hidden;
  background: var(--primary-light);
  height: 100%;
  display: flex;
  flex-direction: column;
}

.product-card img {
  height: 200px;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.product-card:hover img {
  transform: scale(1.05);
}

.product-card .card-body {
  padding: 16px;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}

.product-card .price {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-bottom: 15px;
}

.product-card .price h6 {
  margin-bottom: 0;
}

.product-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: auto;
}

.product-actions .btn,
.product-actions .social-info {
  width: 100%;
  font-size: 14px;
  padding: 8px 10px;
  margin: 0;
  text-align: center;
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}

.l-through {
  text-decoration: line-through;
}

/* Category Card Styling */
.category-card {
  background: linear-gradient(135deg, #222222 0%, #000000 100%);
  color: var(--text-light);
  border-radius: 12px;
  transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}

.category-card .card-img-top {
  height: 180px;
  object-fit: cover;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
}

.category-card .card-body {
  padding: 20px;
}

.category-card .card-title a {
  color: var(--primary-light);
  text-decoration: none;
  font-weight: bold;
}

.category-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.2);
  background: linear-gradient(135deg, #333333 0%, #111111 100%);
}

/* Section Styling */
.section-title h1 {
  color: var(--primary-dark);
  position: relative;
  display: inline-block;
  margin-bottom: 20px;
}

.section-title h1:after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 50px;
  height: 3px;
  background: linear-gradient(to right, var(--primary-dark) 0%, var(--gray-medium) 100%);
}

.section-title p {
  color: var(--accent-color);
}

/* Wishlist Button Styling */
.social-info {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  color: var(--accent-color);
  transition: all var(--transition-speed) ease;
  background-color: transparent;
  border: 1px solid var(--accent-color);
  border-radius: 30px;
  padding: 6px 12px;
  font-size: 14px;
}

.social-info:hover {
  background-color: var(--accent-color);
  color: var(--primary-light);
  transform: translateY(-2px);
}

.social-info span {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

/* Badge Styling */
.badge.bg-danger {
  background: linear-gradient(135deg, #333333 0%, #000000 100%) !important;
  padding: 6px 10px;
  font-size: 12px;
  border-radius: 20px;
}

/* Deals Section */
.related-product-area .card {
  transition: transform var(--transition-speed) ease;
  background: linear-gradient(180deg, var(--primary-light) 0%, var(--gray-light) 100%);
}

.related-product-area .card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}

/* Banner Area */
.banner-area {
  background-image: url('/img/banner/laptop-with-a-red-adhesive-note-with-big-sale-on-it-discounts-online-shopping-desktop-view-with-copy-space-photo.jpg');
}

.banner-content h1 {
  color: var(--primary-dark);
  font-weight: 700;
}

.banner-content p {
  color: var(--accent-color);
}

/* Features Area */
.features-area {
  background: linear-gradient(180deg, var(--gray-light) 0%, var(--primary-light) 100%);
}

.single-features {
  background-color: var(--primary-light);
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  transition: transform var(--transition-speed) ease;
}

.single-features:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}

/* Brand Area */
.brand-area {
  background: linear-gradient(0deg, var(--gray-light) 0%, var(--primary-light) 100%);
  padding: 50px 0;
}

.brand-area h1 {
  color: var(--primary-dark);
  margin-bottom: 40px;
}

.single-img img {
  max-height: 60px;
  filter: grayscale(100%);
  transition: all var(--transition-speed) ease;
  opacity: 0.7;
}

.single-img:hover img {
  filter: grayscale(0%);
  opacity: 1;
}

.product-card .btn {
  width: 36px;
  height: 36px;
  padding: 0;
  border-radius: 50%;
  transition: all 0.3s ease;
}

.product-card .btn i {
  font-size: 0.9rem;
}

.product-card .btn:hover {
  transform: scale(1.1);
}

</style>
	<!-- start banner Area -->
	<section class="banner-area">
		<div class="container">
			<div class="row fullscreen align-items-center justify-content-start">
				<div class="col-lg-12">
					<div class="active-banner-slider owl-carousel">
						<!-- single-slide -->
						<div class="row single-slide align-items-center d-flex">
							<div class="col-lg-5 col-md-6">
								<div class="banner-content">
									<h1>UNLEASH<br>THE WORLD OF LAPTOPS!</h1>
									<p>Your One-Stop shop for Laptops and Accessories Top Brands|Gaming Rigs|Office Essential|
										Custome Builds
									</p>
									<div class="add-bag d-flex align-items-center">
										<a class="add-btn" href=""><span class="lnr lnr-cross"></span></a>
										<span class="add-text text-uppercase">Add to Bag</span>
									</div>
								</div>
							</div>
							<%for(let i=0;i<banners.length;i++){%>
							<div class="col-lg-7">
								<div class="banner-img">
									<img class="img-fluid" src="/uploads/re-image/<%=banners[i].image%>" alt="">
								</div>
							</div>
							<%}%>
						</div>
						<!-- single-slide -->
						<div class="row single-slide">
							<div class="col-lg-5">
								<div class="banner-content">
									<h1>UNLEASH<br>THE WORLD OF LAPTOPS!</h1>
									<p>Your One-Stop shop for Laptops and Accessories Top Brands|Gaming Rigs|Office Essential|
										Custome Builds
									<div class="add-bag d-flex align-items-center">
										<a class="add-btn" href=""><span class="lnr lnr-cross"></span></a>
										<span class="add-text text-uppercase">Add to Bag</span>
									</div>
								</div>
							</div>
							<%for(let i=0;i<banners.length;i++){%>
								<div class="col-lg-7">
									<div class="banner-img">
										<img class="img-fluid" src="/uploads/re-image/<%=banners[i].image%>" alt="">
									</div>
								</div>
								<%}%>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- End banner Area -->

	<!-- start features Area -->
	<section class="features-area section_gap">
		<div class="container">
			<div class="row features-inner">
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-6">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon1.png" alt="">
						</div>
						<h6>Free Delivery</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-6">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon2.png" alt="">
						</div>
						<h6>Return Policy</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-6">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon3.png" alt="">
						</div>
						<h6>24/7 Support</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
				<!-- single features -->
				<div class="col-lg-3 col-md-6 col-sm-6">
					<div class="single-features">
						<div class="f-icon">
							<img src="img/features/f-icon4.png" alt="">
						</div>
						<h6>Secure Payment</h6>
						<p>Free Shipping on all order</p>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- end features Area -->
		
	<!-- start product Area -->
	<section class="py-5 bg-light" id="product_section_main">
		<div class="container">
		  <div class="row justify-content-center mb-4">
			<div class="col-lg-8 text-center">
			  <h2 class="fw-bold mb-3">Latest Products</h2>
			  <p class="text-muted">Discover the latest in high-performance laptops, designed to deliver power and efficiency for all your computing needs.</p>
			</div>
		  </div>
	  
		  <div class="row g-4">
			<% for (let i = 0; i < products.length; i++) { %>
			  <div class="col-lg-3 col-md-4 col-sm-6">
				<div class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden product-card position-relative">
				  <a href="/productDetails?id=<%= products[i]._id %>">
					<img src="/uploads/re-image/<%= products[i].productImage[0] %>" class="card-img-top img-fluid" alt="<%= products[i].productName %>" style="object-fit: cover; height: 220px;">
				  </a>
				  <div class="card-body text-center">
					<h6 class="card-title mb-2 fw-semibold"><%= products[i].productName %></h6>
					<div class="price d-flex justify-content-center align-items-center gap-2 mb-2">
					  <span class="text-danger fw-bold">₹<%= Math.round(products[i].salePrice) %></span>
					  <del class="text-muted small">₹<%= Math.round(products[i].regularPrice) %></del>
					</div>
					<div class="d-flex flex-wrap justify-content-center gap-2 mt-3">
						<button class="btn btn-sm btn-outline-primary addToCartBtn d-flex align-items-center gap-1" data-id="<%= products[i]._id %>">
						  <i class="fas fa-cart-plus"></i>
						</button>
						<button onclick="addToWishlist('<%=products[i]._id%>')" class="btn btn-sm btn-outline-danger d-flex align-items-center gap-1">
						  <i class="fas fa-heart"></i>
						</button>
						<a href="/productDetails?id=<%= products[i]._id %>" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-1">
						  <i class="fas fa-eye"></i>
						</a>
					  </div>
					  
				  </div>
				</div>
			  </div>
			<% } %>
		  </div>
		</div>
	  </section>
	  
<!-- end product Area -->
	
	
	
	<!-- Start brand Area -->
	<section class="brand-area section_gap">
		<h1 class="text-center">Popular Brands</h1>
		<div class="container">
			<div class="row">
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="/img/applelogo.png" alt="">
				</a>
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="/img/Asuslogo.png" alt="">
				</a>
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="/img/delllogo.png" alt="">
				</a>
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="/img/hplogo.png" alt="">
				</a>
				<a class="col single-img" href="#">
					<img class="img-fluid d-block mx-auto" src="/img/samsunglogo.jpeg" alt="">
				</a>
			</div>
		</div>
	</section>
	<!-- End brand Area -->
<!-- Start deals of the week -->
<section class="related-product-area section_gap_bottom bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6 text-center">
                <div class="section-title">
                    <h1>Deals of the Week</h1>
                    <p>Grab the best deals with up to 50% off on top brands!</p>
                </div>
            </div>
        </div>
		<div class="row">
			<% for (let i = 0; i < discountProducts.length; i++) { %>
				<div class="col-lg-3 col-md-4 col-sm-6 mb-4">
					<div class="card shadow-sm border-0 h-100" style="transform: scale(0.95);">
						<a href="/productDetails?id=<%= products[i]._id %>">
							<img src="/uploads/re-image/<%= discountProducts[i].productImage[0] %>" 
								 class="card-img-top" 
								 style="height: 200px; object-fit: cover;" 
								 alt="<%= discountProducts[i].productName %>">
						</a>
						<div class="card-body d-flex flex-column justify-content-between p-3">
							<h6 class="card-title mb-2 text-truncate">
								<a href="/product/<%= discountProducts[i]._id %>" class="text-dark">
									<%= discountProducts[i].productName %>
								</a>
							</h6>
							<div class="price d-flex align-items-center mb-2">
								<h6 class="text-success me-2 mb-0">
									₹<%= discountProducts[i].salePrice.toLocaleString('en-IN') %>
								</h6>
								<h6 class="l-through text-muted mb-0">
									₹<%= discountProducts[i].regularPrice.toLocaleString('en-IN') %>
								</h6>
							</div>
							<span class="badge bg-danger text-light mb-3">
								<% 
									let discountPercentage = ((discountProducts[i].regularPrice - discountProducts[i].salePrice) / discountProducts[i].regularPrice) * 100;
									discountPercentage = Math.round(discountPercentage);
								%>
								<%= discountPercentage %>% OFF
							</span>
		
							<!-- Action Buttons -->
							<div class="d-flex justify-content-center gap-2 mt-auto">
								<button class="btn btn-sm btn-outline-primary" title="Add to Cart"
										data-id="<%= discountProducts[i]._id %>">
									<i class="fas fa-cart-plus"></i>
								</button>
								<button onclick="addToWishlist('<%= discountProducts[i]._id %>')" 
										class="btn btn-sm btn-outline-danger" title="Add to Wishlist">
									<i class="fas fa-heart"></i>
								</button>
								<a href="/productDetails?id=<%= discountProducts[i]._id %>" 
								   class="btn btn-sm btn-outline-secondary" title="View More">
									<i class="fas fa-eye"></i>
								</a>
							</div>
						</div>
					</div>
				</div>
			<% } %>
		</div>
		
		
    </div>
</section>
<!-- End deals of the week -->

<script>
	document.querySelectorAll(".addToCartBtn").forEach(button => {
    button.addEventListener("click", async () => {
        const productId = button.getAttribute("data-id");

        try {
            const response = await fetch(`/cart/${productId}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ quantity: 1 }) // Example quantity
            });

            const result = await response.json();

            if (result.success) {
                Swal.fire({
                    icon: "success",
                    title: "Product added to Cart",
                    showConfirmButton: false,
                    timer:1000
                });
            } else {
                Swal.fire({
                    icon: "error",
                    title: "Failed to add to cart",
                    text: result.message,
                    showConfirmButton: false,
                    timer:1000
                });
            }
        } catch (error) {
            console.error("Error:", error);
           
        }
    });
});


function addToWishlist(productId){
			$.ajax({
				url:'/wishlist',
				method:'POST',
				data :{productId :productId},
				success :(response)=>{
					if(response.status){
						Swal.fire({
							title : "Added to wishlist",
							text : "The product has been added to you wishlist",
							icon : "success",
							timer : 2000,
						})
					} else {
						Swal.fire({
							title:response.message,
							icon:"warning",
							timer:2000,

						})
					}
				},
				error:(error)=>{
					Swal.fire({
						title : "Error",
						text:"Product already in your Cart",
						icon:"error",
						timer :2000,
					})
					}

			})
		}

</script>

	<%-include("../../views/partials/user/footer")%>